# 1.4 기타 빈 설정 메타정보

## 빈 이름
### 빈 이름 - XML

- id
    - 빈의 식별자
    - id 타입 형식을 따름 (공백이 안되고, 첫글자는 알파벳/밑줄만 되고…)
- name
    - 빈의 식별자
    - 특별한 제약이 없음
    - 한번에 여러개 지정 가능(`”1234,hello;헬로우”`) ← `,` `;` 로 구분
- id, name 동시 사용 가능
- 빈의 이름을 여러개 주는 이유
    - 같은 빈이지만 다른 이름으로 참조하면 편리할 때
    - 이전에 만들었던 빈의 설정을 그대로 가져와서 사용한다고 할 때

### 빈 이름 - 애노테이션

- `@Component` 스테레오타입 애노테이션
    - 보통 클래스 이름을 그대로 빈 이름으로 사용함
    - 클래스 이름 첫 글자만 소문자로 바꾸면 빈 이름이 됨
    - `@Component("customName")`



- `@Configuration`, `@Bean`
    - `@Bean`을 정의하는 메소드 이름이 그대로 빈 이름이 됨
    - `@Bean(name="customName")`
    - `@Bean(name={"customName", "testName"})`


## 빈 생명주기 메소드

### 초기화 메소드

- 빈 오브젝트가 생성되고 DI 작업까지 마친 후 실행되는 메소드
- 기본적인 초기화 작업은 생성자에서 진행하면 되지만, DI를 통해 모든 프로퍼티가 주입된 후에야 가능한 초기화 작업도 있음. 이럴 때 사용하면 됨

- 초기화 콜백 인터페이스
    - `InitializingBean` 인터페이스를 구현해서 빈을 작성
    - 애플리케이션 빈 코드에 스프링 인터페이스를 노출하므로 권장하지 않음

- `init-Method` 지정
    - XML 방식이라 스프링부트에서는 사용되지 않음

- `@PostConstruct`
    - 초기화를 담당할 메소드에 해당 애노테이션을 부여해주기만 하면 됨.
    - 자바 표준 애노테이션
    - 가장 사용이 권장되는 방식

```java
@PostConstruct
public void init(){
		System.out.println("해당 메서드는 빈 등록 및 DI가 끝난 후 호출됩니다.");
}
```

- `@Bean(init-method)`
    - `@Bean(init-method="initResource")`와 같이 사용

### 제거 메소드

- 컨테이너가 종료될 때 호출 → 빈이 사용한 리소스를 반환하거나 종료 전에 처리해야 할 작업 수행

- 제거 콜백 인터페이스
    - `DisposableBean` 인터페이스 구현 → `destroy()` 구현
    - 종속적인 코드를 만들기 때문에 권장하지 않음

- `destroy-method`
    - XML 방식이라 스프링부트에서는 사용되지 않음

- `@PreDestroy`
    - 컨테이너가 종료될 때 실행될 메소드에 붙여줌
    - 가장 권장되는 방식

```java
@PostConstruct
public void destroy(){
		System.out.println("해당 메서드는 컨테이너가 종료될 때 호출됩니다.");
}
```

- `@Bean(destroyMethod)`
    - 애노테이션에 지정하여 사용


## 팩토리 빈과 팩토리 메소드

- 생성자 대신 오브젝트를 생성해주는 **코드의 도움을 받아 빈 오브젝트를 생성하는 것**을 “팩토리 빈”이라고 부름
    - **빈 팩토리와는 다르니 혼동 주의**
    - 팩토리 빈 자신은 빈 오브젝트로 사용되지 않음
    - 빈 오브젝트를 만들어주는 기능만 제공

### FactoryBean 인터페이스

- new 키워드나 리플렉션 API를 이용해 생성자를 호출하는 방식으로는 만들 수 없는, “JDK 다이내믹 프록시”를 빈으로 등록하기 위해서
    - FactoryBean 인터페이스를 구현
    - 다이나믹 프록시를 생성하는 getObject() 메서드 구현
    - 팩토리 빈으로 등록해서 사용

- 가장 단순하고 자주 사용되는 방법
    - 팩토리 빈은 기술 서비스 빈이나 기반 서비스 빈을 활용할 때 주로 사용된다고 함

[JDK Dynamic Proxy와 CGLIB의 차이점은 무엇일까? | Moon](https://gmoon92.github.io/spring/aop/2019/04/20/jdk-dynamic-proxy-and-cglib.html)

[[10분 테코톡] 기론, 리버의 JDK Dynamic Proxy와 CGLIB](https://www.youtube.com/watch?v=MFckVKrJLRQ)

### 스태틱 팩토리 메소드

- 클래스의 스태틱 메소드를 호출해서 인스턴스를 생성하는 방식

```java
public static User getUser() {
    User user = new User();
    // 초기화 작업 수행...

    return user;
}
```

### 인스턴스 팩토리 메소드

- FactoryBean 구현체가 팩토리 빈 오브젝트의 메소드를 이용해 빈 오브젝트를 생성하는 대표적인 방법
- 스프링 인터페이스 종속적

```java
//예시
public class AuthenticationManagerFactoryBean implements FactoryBean<AuthenticationManager>, BeanFactoryAware {
    // 대충 구현 코드들...

    @Override
    public AuthenticationManager getObject() throws Exception {
            // 여러가지 초기화 메서드를 수행하고 
            return 초기화가_완료된_객체; //를 리턴함 
    }
}
```

### `@Bean` 메소드

- `@Bean`도 일종의 팩토리 메소드다.
- 스프링 컨테이너가 `@Bean` 애노테이션이 달린 메소드를 실행해 빈 오브젝트를 가져오는 방식이기 때문.
- 빈 설정 및 DI까지 적용할 경우 `@Configuration` 사용
- 특정 빈만 팩토리 메소드를 통해 만들고 싶을 경우 → 일반 클래스에 `@Bean` 메소드 추가